import{j as e}from"./index-CWpPYuan.js";import{R as c,L as G}from"./react-vendor-DTkXckhQ.js";import{t as ee,s as te,M as H,c as se,V as re,W as ne,Y as ce,U as ae,Z as ie}from"./icons-DpAAz4P9.js";const T=800,z=["–°–∫–∞–π-–°—Ç—Ä–∞–∂","–ü—Ä–∞–≤–æ-–°–∞–º—É—Ä–∞–π","–ü—É–ª—å—Å-–†–µ–π–¥–µ—Ä","–ö–∏–±–µ—Ä-–ú–µ–¥–∏–∫","–ù–µ–æ–Ω-–¢–∞–∫—Ç–∏–∫","–ê—Å—Ç—Ä–∞–ª-–û—Ñ–∏—Ü–µ—Ä","–§–∞–Ω—Ç–æ–º-–õ–µ—á–∞—â–∏–π","–®–∏—Ñ—Ä-–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä","–ö–≤–∞–Ω—Ç-–ë–æ–µ—Ü","–ü–∏–∫—Å–µ–ª—å-–í–æ–ª–∫","–¢—É–º–∞–Ω-–ö–æ–º–∞–Ω–¥–æ—Ä","–ò—Å–∫—Ä–∞-–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å","–ù—É–ª—å-–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è","–ü–æ–ª—è—Ä–Ω—ã–π –ü–∏–ª–æ—Ç","–ì–æ—Ä–æ–¥—Å–∫–æ–π –•–∏—Ä—É—Ä–≥","–°—ã–≤–æ—Ä–æ—Ç–∫–∞-Vibe","–°—Ç–µ—Ä–∏–ª—å–Ω—ã–π –ù–∏–Ω–¥–∑—è","–°–∫–∞–ª—å–ø–µ–ª—å-–û–±–ª–∞–∫–æ","–†–µ–Ω—Ç–≥–µ–Ω-–ü–∞–Ω–∫","–í–∞—Ç–∫–∞-Supreme"];function w(){const i=z[Math.floor(Math.random()*z.length)],a=Math.floor(Math.random()*900+100);return`${i} ${a}`}function oe(i){try{return typeof i=="string"?JSON.parse(i):i instanceof ArrayBuffer?JSON.parse(new TextDecoder().decode(i)):(typeof Blob<"u"&&i instanceof Blob,null)}catch{return null}}function le(i){return new Date(i).toLocaleTimeString(void 0,{hour12:!1})}const de=`
.rc-wrap{border:1px solid #111;background:#111;border-radius:4px;overflow:hidden;font:13px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Helvetica Neue',Arial}
.rc-head{padding:6px 8px;color:#c9d1d9;background:#0e0e0f;border-bottom:1px solid #0b0b0b;display:flex;justify-content:space-between;align-items:center}
.rc-head .pill{display:inline-flex;align-items:center;gap:6px;border-radius:10px;padding:2px 8px;font-size:12px}
.rc-pill-online{background:#193a2b;color:#7ee787;border:1px solid #2ea04344}
.rc-pill-admin{background:#1a2438;color:#79c0ff;border:1px solid #79c0ff33}
.rc-list{height:280px;overflow:auto;background:#1a1a1b}
.rc-list ul{list-style:none;margin:0;padding:0}
.rc-list li{padding:3px 8px;white-space:pre-wrap;word-break:break-word}
.rc-list li:nth-child(odd){background:#232324}
.rc-list li:nth-child(even){background:#1e1e1f}
.rc-ts{color:#9da1a6;margin-right:6px}
.rc-me{color:#a3d977;font-weight:600}
.rc-other{color:#e06c75;font-weight:600}
.rc-admin{color:#facc15;font-weight:700}
.rc-form{display:flex;gap:6px;padding:6px;background:#0f0f10;border-top:1px solid #0b0b0b}
.rc-input{flex:1;background:#0f0f10;border:1px solid #2a2a2b;color:#e5e7eb;border-radius:4px;padding:6px 8px}
.rc-btn{background:#2b2b2c;border:1px solid #3a3a3c;color:#e5e7eb;border-radius:4px;padding:6px 10px;cursor:pointer}
.rc-btn:disabled{opacity:.6;cursor:not-allowed}
.rc-actions{display:flex;gap:4px;margin-left:8px}
.rc-ax{font-size:12px;background:#2b2b2c;border:1px solid #3a3a3c;color:#ccc;border-radius:4px;padding:2px 6px;cursor:pointer}
.rc-empty{opacity:.7;padding:6px 8px}
.nick-back{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:1000}
.nick-card{width:min(92vw,520px);background:#121316;border:1px solid #2a2a2b;border-radius:10px;padding:14px;color:#e5e7eb}
.nick-row{display:flex;gap:8px;margin-top:10px}
.nick-input{flex:1;background:#0f0f10;border:1px solid #2a2a2b;color:#e5e7eb;border-radius:6px;padding:8px}
.nick-btn{background:#243040;border:1px solid #375a7a;color:#d6e8ff;border-radius:6px;padding:8px 12px;cursor:pointer}
.nick-pill{display:inline-block;margin-top:8px;margin-right:6px;background:#222427;border:1px solid #303236;border-radius:999px;padding:4px 10px;cursor:pointer}
.nick-warn{font-size:12px;color:#b3b7bf;opacity:.9;margin-top:6px}
`;function pe(i){try{const a=new URL(i);return a.protocol=a.protocol==="wss:"?"https:":a.protocol==="ws:"?"http:":a.protocol,a.pathname="/",a.search="",a.hash="",a.toString().replace(/\/+$/,"")}catch{return""}}function ue(i){const a=`@e${i}`;return{NAME_KEY:`chat:nick${a}`,NAME_LOCK:`chat:nick:lock${a}`}}function xe({room:i="global",className:a}){const N="wss://notifications-worker.wizardiowhy.workers.dev/chat",R=c.useMemo(()=>pe(N),[N]),[$,A]=c.useState(1),[o,M]=c.useState(!1),m=c.useMemo(()=>ue($),[$]),[C,L]=c.useState(!1),[j,W]=c.useState(!1),[J,U]=c.useState(""),[O,k]=c.useState([]),h=c.useRef(null),B=c.useRef(null),S=c.useRef({}),[d,y]=c.useState(null),[u,v]=c.useState(!0),[D,x]=c.useState(w()),P=c.useRef({epochReady:o,needNick:u,nick:d}),Y=c.useRef(m),b=c.useRef(null);c.useEffect(()=>{if(o)try{const t=localStorage.getItem(m.NAME_KEY),r=localStorage.getItem(m.NAME_LOCK)==="1";t&&r?(y(t),v(!1),x(t)):t&&!r?(y(t),x(t),v(!0)):(y(null),x(w()),v(!0))}catch{y(null),x(w()),v(!0)}},[o,m.NAME_KEY,m.NAME_LOCK]),c.useEffect(()=>{P.current={epochReady:o,needNick:u,nick:d}},[o,u,d]),c.useEffect(()=>{Y.current=m},[m]),c.useEffect(()=>{u&&(b.current=null)},[u]),c.useEffect(()=>{let t=!1;if(!R){A(1),M(!0);return}return(async()=>{try{const r=await fetch(`${R}/nick-epoch`,{credentials:"include"}),n=r.ok&&Number((await r.json().catch(()=>({}))).epoch)||1;t||(A(n),M(!0))}catch{t||(A(1),M(!0))}})(),()=>{t=!0}},[R]),c.useEffect(()=>{const t=B.current;t&&(t.scrollTop=t.scrollHeight)},[O.length]),c.useEffect(()=>{let t=!1,r=0,n=null;const f=()=>{if(t)return;L(!1);const g=new URL(N);g.searchParams.set("room",i),n=new WebSocket(g),h.current=n,n.addEventListener("open",()=>{L(!0),S.current={},r=0;const{epochReady:E,needNick:s,nick:l}=P.current;if(E&&l&&!s)try{n.send(JSON.stringify({type:"hello",name:l})),b.current=l}catch{}}),n.addEventListener("message",async E=>{try{let s=oe(E.data);if(!s&&typeof Blob<"u"&&E.data instanceof Blob&&(s=JSON.parse(await E.data.text())),!s)return;if(s.type==="history")k(s.messages);else if(s.type==="message"){const l=s.cid;if(l&&S.current[l]){const p=S.current[l];delete S.current[l],k(_=>{const K=_.filter(I=>I.id!==p);return K.some(I=>I.id===s.message.id)?K:[...K,s.message]})}else k(p=>p.some(_=>_.id===s.message.id)?p:[...p,s.message])}else if(s.type==="delete")k(l=>l.filter(p=>p.id!==s.id));else if(s.type==="edit")k(l=>l.map(p=>p.id===s.id?{...p,text:s.text}:p));else if(s.type==="system"&&(s.text==="admin-ok"?W(!0):s.text==="hello-ok"&&!s.name&&W(!1),s.name&&(s.text==="hello-ok"||s.text==="admin-ok"))){y(s.name),x(s.name),b.current=s.name;try{const{NAME_KEY:l,NAME_LOCK:p}=Y.current;localStorage.setItem(l,s.name),localStorage.setItem(p,"1")}catch{}v(!1)}}catch{}});const Z=()=>{t||(L(!1),r=Math.min(r+1,6),setTimeout(f,400*r))};n.addEventListener("close",Z),n.addEventListener("error",()=>n==null?void 0:n.close())};return f(),()=>{t=!0;try{n==null||n.close()}catch{}h.current=null,b.current=null}},[N,i]),c.useEffect(()=>{const t=h.current;if(!(!t||t.readyState!==WebSocket.OPEN)&&!(!o||u||!d)&&b.current!==d)try{t.send(JSON.stringify({type:"hello",name:d})),b.current=d}catch{}},[o,u,d]);function F(){const r=((D||"").trim().slice(0,80)||w()).replace(/[^\p{L}\p{N}_ -]+/gu,"");y(r),x(r);try{localStorage.setItem(m.NAME_KEY,r)}catch{}const n=h.current;if(n&&n.readyState===WebSocket.OPEN)try{n.send(JSON.stringify({type:"hello",name:r})),b.current=r}catch{}}function V(){const t=J.replace(/\s+/g," ").trim(),r=h.current;if(!o||!d||u||!t||!r||r.readyState!==WebSocket.OPEN)return;const n=`${Date.now()}_${Math.random().toString(36).slice(2)}`,f=`loc_${n}`;S.current[n]=f,k(g=>[...g,{id:f,author:j?"Admin":d,text:t,ts:Date.now()}]),r.send(JSON.stringify({type:"message",text:t.slice(0,T),cid:n})),U("")}const q=t=>{const r=h.current;!j||!r||r.readyState!==WebSocket.OPEN||r.send(JSON.stringify({type:"delete",id:t}))},Q=(t,r)=>{var g;const n=h.current;if(!j||!n||n.readyState!==WebSocket.OPEN)return;const f=(g=prompt("–ò–∑–º–µ–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:",r))==null?void 0:g.trim();f&&n.send(JSON.stringify({type:"edit",id:t,text:f.slice(0,T)}))},X=t=>t==="Admin"?"rc-admin":t===d?"rc-me":"rc-other";return e.jsxs("div",{className:a??"",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:de}}),e.jsxs("div",{className:"rc-wrap","aria-busy":!o,children:[e.jsxs("div",{className:"rc-head",children:[e.jsx("div",{children:"Chat"}),e.jsxs("div",{children:[e.jsx("span",{className:`pill ${C?"rc-pill-online":""}`,children:C?"online":o?"offline":"‚Ä¶"}),j&&e.jsx("span",{className:"pill rc-pill-admin",style:{marginLeft:6},children:"Admin"})]})]}),e.jsx("div",{ref:B,className:"rc-list",children:o?O.length===0?e.jsx("div",{className:"rc-empty",children:"‚Ä¶"}):e.jsx("ul",{children:O.map(t=>e.jsxs("li",{children:[e.jsxs("span",{className:"rc-ts",children:["[",le(t.ts),"]"]}),e.jsx("span",{className:X(t.author),children:t.author}),e.jsx("span",{children:": "}),e.jsx("span",{children:t.text}),j&&e.jsxs("span",{className:"rc-actions",children:[e.jsx("button",{className:"rc-ax",onClick:()=>Q(t.id,t.text),children:"–†–µ–¥."}),e.jsx("button",{className:"rc-ax",onClick:()=>q(t.id),children:"–£–¥–∞–ª."})]})]},t.id))}):e.jsx("div",{className:"rc-empty",children:"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶"})}),e.jsxs("form",{className:"rc-form",onSubmit:t=>{t.preventDefault(),V()},children:[e.jsx("input",{className:"rc-input",placeholder:"–Ω–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ‚Ä¶",value:J,onChange:t=>U(t.target.value),maxLength:T,disabled:!o||!C||!d||u}),e.jsx("button",{type:"submit",className:"rc-btn",disabled:!o||!C||!d||u,children:"‚ñ∂"})]})]}),o&&u&&e.jsx("div",{className:"nick-back",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"nick-card",children:[e.jsx("div",{style:{fontWeight:700,fontSize:16},children:"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∏–∫"}),e.jsx("div",{className:"nick-warn",children:"–ù–∏–∫ –∑–∞–¥–∞—ë—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑. –°–º–µ–Ω–∏—Ç—å –µ–≥–æ –ø–æ—Ç–æ–º –Ω–µ–ª—å–∑—è."}),e.jsxs("div",{className:"nick-row",children:[e.jsx("input",{className:"nick-input",value:D,onChange:t=>x(t.target.value),maxLength:80,placeholder:"–í–∞—à –Ω–∏–∫‚Ä¶",autoFocus:!0}),e.jsx("button",{type:"button",className:"nick-btn",onClick:()=>x(w()),children:"üé≤"}),e.jsx("button",{type:"button",className:"nick-btn",onClick:F,children:"–û–∫"})]}),e.jsx("div",{children:Array.from({length:5}).map((t,r)=>e.jsx("span",{className:"nick-pill",onClick:()=>x(w()),children:"üé≤ –°–ª—É—á–∞–π–Ω—ã–π"},r))})]})})]})}const me=[{icon:e.jsx(ce,{className:"w-5 h-5"}),title:"–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å",text:"–í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–æ HTTPS. –ê–¥–º–∏–Ω ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–π —Å—Å—ã–ª–∫–µ."},{icon:e.jsx(ae,{className:"w-5 h-5"}),title:"–ö–æ–º—å—é–Ω–∏—Ç–∏",text:"–û–±—â–∏–π —á–∞—Ç —Å —Ä–∞–Ω–¥–æ–º–Ω—ã–º–∏ –Ω–∏–∫–∞–º–∏ ‚Äî –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏."},{icon:e.jsx(ie,{className:"w-5 h-5"}),title:"–û–±–Ω–æ–≤–ª–µ–Ω–∏—è",text:"–õ–µ–Ω—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏–∑ Telegram (KV —Ö—Ä–∞–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100)."},{icon:e.jsx(H,{className:"w-5 h-5"}),title:"–ú–æ–¥–µ—Ä–∞—Ü–∏—è",text:"–ê–¥–º–∏–Ω –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è."}],fe=[{to:"/faq",label:"FAQ",icon:e.jsx(se,{className:"w-4 h-4"})},{to:"/rules",label:"–ü—Ä–∞–≤–∏–ª–∞",icon:e.jsx(re,{className:"w-4 h-4"})},{to:"/news",label:"–ù–æ–≤–æ—Å—Ç–∏",icon:e.jsx(ne,{className:"w-4 h-4"})}];function Ne(){const i=c.useRef(null);return c.useEffect(()=>{document.title="–ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ ‚Äî –ü–∞–º—è—Ç–∫–∞ (SKY)"},[]),e.jsxs("main",{className:"min-h-screen bg-[#0a0b0d] text-white",children:[e.jsxs("section",{ref:i,className:"mx-auto max-w-6xl px-4 pt-10 pb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/60",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:"beta"})]}),e.jsxs("h1",{className:"mt-3 text-3xl sm:text-4xl font-bold tracking-tight",children:["–ü–æ—Ä—Ç–∞–ª –ø—Ä–æ–µ–∫—Ç–∞ ",e.jsx("span",{className:"text-sky-400",children:"SKY"})]}),e.jsx("p",{className:"mt-2 text-white/70 max-w-2xl",children:"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ó–¥–µ—Å—å –±—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏, —á–∞—Ç –∏ –ø–æ–ª–µ–∑–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –¥–ª—è –∫–æ–º–∞–Ω–¥—ã."}),e.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:fe.map(a=>e.jsxs(G,{to:a.to,className:"inline-flex items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-sm hover:bg-white/10 transition",children:[a.icon,a.label,e.jsx(te,{className:"w-3.5 h-3.5 opacity-70"})]},a.to))})]}),e.jsx("section",{className:"mx-auto max-w-6xl px-4 pb-6",children:e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:me.map((a,N)=>e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 backdrop-blur hover:border-white/20 transition",children:[e.jsx("div",{className:"mb-2 inline-flex rounded-lg bg-white/10 p-2",children:a.icon}),e.jsx("div",{className:"font-semibold",children:a.title}),e.jsx("div",{className:"mt-1 text-sm text-white/70",children:a.text})]},N))})}),e.jsx("section",{className:"mx-auto max-w-6xl px-4 pb-10",children:e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5 text-sky-300"}),e.jsx("h2",{className:"text-lg font-semibold",children:"–ö–æ–º–∞–Ω–¥–Ω—ã–π —á–∞—Ç"})]}),e.jsx(xe,{room:"global",className:"bg-transparent border-0 p-0"})]})})]})}export{Ne as default};
