import{j as e}from"./index-BkN6RQUH.js";import{R as a,L as Q}from"./react-vendor-DTkXckhQ.js";import{t as X,s as Z,M as J,c as G,V as ee,W as te,Y as se,U as re,Z as ne}from"./icons-DpAAz4P9.js";const O=800,D=["–°–∫–∞–π-–°—Ç—Ä–∞–∂","–ü—Ä–∞–≤–æ-–°–∞–º—É—Ä–∞–π","–ü—É–ª—å—Å-–†–µ–π–¥–µ—Ä","–ö–∏–±–µ—Ä-–ú–µ–¥–∏–∫","–ù–µ–æ–Ω-–¢–∞–∫—Ç–∏–∫","–ê—Å—Ç—Ä–∞–ª-–û—Ñ–∏—Ü–µ—Ä","–§–∞–Ω—Ç–æ–º-–õ–µ—á–∞—â–∏–π","–®–∏—Ñ—Ä-–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä","–ö–≤–∞–Ω—Ç-–ë–æ–µ—Ü","–ü–∏–∫—Å–µ–ª—å-–í–æ–ª–∫","–¢—É–º–∞–Ω-–ö–æ–º–∞–Ω–¥–æ—Ä","–ò—Å–∫—Ä–∞-–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å","–ù—É–ª—å-–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è","–ü–æ–ª—è—Ä–Ω—ã–π –ü–∏–ª–æ—Ç","–ì–æ—Ä–æ–¥—Å–∫–æ–π –•–∏—Ä—É—Ä–≥","–°—ã–≤–æ—Ä–æ—Ç–∫–∞-Vibe","–°—Ç–µ—Ä–∏–ª—å–Ω—ã–π –ù–∏–Ω–¥–∑—è","–°–∫–∞–ª—å–ø–µ–ª—å-–û–±–ª–∞–∫–æ","–†–µ–Ω—Ç–≥–µ–Ω-–ü–∞–Ω–∫","–í–∞—Ç–∫–∞-Supreme"];function w(){const c=D[Math.floor(Math.random()*D.length)],r=Math.floor(Math.random()*900+100);return`${c} #${r}`}function ae(c){try{return typeof c=="string"?JSON.parse(c):c instanceof ArrayBuffer?JSON.parse(new TextDecoder().decode(c)):(typeof Blob<"u"&&c instanceof Blob,null)}catch{return null}}function ce(c){return new Date(c).toLocaleTimeString(void 0,{hour12:!1})}const ie=`
.rc-wrap{border:1px solid #111;background:#111;border-radius:4px;overflow:hidden;font:13px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Helvetica Neue',Arial}
.rc-head{padding:6px 8px;color:#c9d1d9;background:#0e0e0f;border-bottom:1px solid #0b0b0b;display:flex;justify-content:space-between;align-items:center}
.rc-head .pill{display:inline-flex;align-items:center;gap:6px;border-radius:10px;padding:2px 8px;font-size:12px}
.rc-pill-online{background:#193a2b;color:#7ee787;border:1px solid #2ea04344}
.rc-pill-admin{background:#1a2438;color:#79c0ff;border:1px solid #79c0ff33}
.rc-list{height:280px;overflow:auto;background:#1a1a1b}
.rc-list ul{list-style:none;margin:0;padding:0}
.rc-list li{padding:3px 8px;white-space:pre-wrap;word-break:break-word}
.rc-list li:nth-child(odd){background:#232324}
.rc-list li:nth-child(even){background:#1e1e1f}
.rc-ts{color:#9da1a6;margin-right:6px}
.rc-me{color:#a3d977;font-weight:600}
.rc-other{color:#e06c75;font-weight:600}
.rc-admin{color:#facc15;font-weight:700}
.rc-form{display:flex;gap:6px;padding:6px;background:#0f0f10;border-top:1px solid #0b0b0b}
.rc-input{flex:1;background:#0f0f10;border:1px solid #2a2a2b;color:#e5e7eb;border-radius:4px;padding:6px 8px}
.rc-btn{background:#2b2b2c;border:1px solid #3a3a3c;color:#e5e7eb;border-radius:4px;padding:6px 10px;cursor:pointer}
.rc-btn:disabled{opacity:.6;cursor:not-allowed}
.rc-actions{display:flex;gap:4px;margin-left:8px}
.rc-ax{font-size:12px;background:#2b2b2c;border:1px solid #3a3a3c;color:#ccc;border-radius:4px;padding:2px 6px;cursor:pointer}
.rc-empty{opacity:.7;padding:6px 8px}
.nick-back{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:1000}
.nick-card{width:min(92vw,520px);background:#121316;border:1px solid #2a2a2b;border-radius:10px;padding:14px;color:#e5e7eb}
.nick-row{display:flex;gap:8px;margin-top:10px}
.nick-input{flex:1;background:#0f0f10;border:1px solid #2a2a2b;color:#e5e7eb;border-radius:6px;padding:8px}
.nick-btn{background:#243040;border:1px solid #375a7a;color:#d6e8ff;border-radius:6px;padding:8px 12px;cursor:pointer}
.nick-pill{display:inline-block;margin-top:8px;margin-right:6px;background:#222427;border:1px solid #303236;border-radius:999px;padding:4px 10px;cursor:pointer}
.nick-warn{font-size:12px;color:#b3b7bf;opacity:.9;margin-top:6px}
`;function oe(c){try{const r=new URL(c);return r.protocol=r.protocol==="wss:"?"https:":r.protocol==="ws:"?"http:":r.protocol,r.pathname="/",r.search="",r.hash="",r.toString().replace(/\/+$/,"")}catch{return""}}function le(c){const r=`@e${c}`;return{NAME_KEY:`chat:nick${r}`,NAME_LOCK:`chat:nick:lock${r}`}}function de({room:c="global",className:r}){const f="wss://notifications-worker.wizardiowhy.workers.dev/chat",E=a.useMemo(()=>oe(f),[f]),[I,C]=a.useState(1),[l,A]=a.useState(!1),x=a.useMemo(()=>le(I),[I]),[S,T]=a.useState(!1),[y,$]=a.useState(!1),[U,W]=a.useState(""),[M,b]=a.useState([]),g=a.useRef(null),Y=a.useRef(null),v=a.useRef({}),[u,N]=a.useState(null),[k,j]=a.useState(!0),[B,h]=a.useState(w());a.useEffect(()=>{if(l)try{const t=localStorage.getItem(x.NAME_KEY),s=localStorage.getItem(x.NAME_LOCK)==="1";t&&s?(N(t),j(!1),h(t)):t&&!s?(N(t),h(t),j(!0)):(N(null),h(w()),j(!0))}catch{N(null),h(w()),j(!0)}},[l,x.NAME_KEY,x.NAME_LOCK]),a.useEffect(()=>{let t=!1;if(!E){C(1),A(!0);return}return(async()=>{try{const s=await fetch(`${E}/nick-epoch`,{credentials:"include"}),i=s.ok&&Number((await s.json().catch(()=>({}))).epoch)||1;t||(C(i),A(!0))}catch{t||(C(1),A(!0))}})(),()=>{t=!0}},[E]),a.useEffect(()=>{const t=Y.current;t&&(t.scrollTop=t.scrollHeight)},[M.length]),a.useEffect(()=>{let t=!1,s=0;const i=()=>{if(t)return;const d=new URL(f);d.searchParams.set("room",c);const o=new WebSocket(d);g.current=o,o.addEventListener("open",()=>{T(!0),s=0,l&&u&&!k&&o.send(JSON.stringify({type:"hello",name:u}))}),o.addEventListener("message",async L=>{try{let n=ae(L.data);if(!n&&typeof Blob<"u"&&L.data instanceof Blob&&(n=JSON.parse(await L.data.text())),!n)return;if(n.type==="history")b(n.messages);else if(n.type==="message"){const m=n.cid;if(m&&v.current[m]){const p=v.current[m];delete v.current[m],b(_=>{const K=_.filter(R=>R.id!==p);return K.some(R=>R.id===n.message.id)?K:[...K,n.message]})}else b(p=>p.some(_=>_.id===n.message.id)?p:[...p,n.message])}else if(n.type==="delete")b(m=>m.filter(p=>p.id!==n.id));else if(n.type==="edit")b(m=>m.map(p=>p.id===n.id?{...p,text:n.text}:p));else if(n.type==="system"&&(n.text==="admin-ok"&&$(!0),n.text==="hello-ok"&&$(!1),n.name)){N(n.name);try{localStorage.setItem(x.NAME_KEY,n.name),localStorage.setItem(x.NAME_LOCK,"1")}catch{}j(!1)}}catch{}});const q=()=>{T(!1),!t&&(s=Math.min(s+1,6),setTimeout(i,400*s))};o.addEventListener("close",q),o.addEventListener("error",()=>o.close())};return i(),()=>{var d;t=!0;try{(d=g.current)==null||d.close()}catch{}}},[f,c,l,u,k,x.NAME_KEY,x.NAME_LOCK]);function P(){const s=((B||"").trim().slice(0,80)||w()).replace(/[^\p{L}\p{N}_# -]+/gu,"");N(s);try{localStorage.setItem(x.NAME_KEY,s)}catch{}const i=g.current;i&&i.readyState===WebSocket.OPEN&&i.send(JSON.stringify({type:"hello",name:s}))}function z(){const t=U.replace(/\s+/g," ").trim(),s=g.current;if(!l||!u||k||!t||!s||s.readyState!==WebSocket.OPEN)return;const i=`${Date.now()}_${Math.random().toString(36).slice(2)}`,d=`loc_${i}`;v.current[i]=d,b(o=>[...o,{id:d,author:y?"Admin":u,text:t,ts:Date.now()}]),s.send(JSON.stringify({type:"message",text:t.slice(0,O),cid:i})),W("")}const H=t=>{const s=g.current;!y||!s||s.readyState!==WebSocket.OPEN||s.send(JSON.stringify({type:"delete",id:t}))},F=(t,s)=>{var o;const i=g.current;if(!y||!i||i.readyState!==WebSocket.OPEN)return;const d=(o=prompt("–ò–∑–º–µ–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:",s))==null?void 0:o.trim();d&&i.send(JSON.stringify({type:"edit",id:t,text:d.slice(0,O)}))},V=t=>t==="Admin"?"rc-admin":t===u?"rc-me":"rc-other";return e.jsxs("div",{className:r??"",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:ie}}),e.jsxs("div",{className:"rc-wrap","aria-busy":!l,children:[e.jsxs("div",{className:"rc-head",children:[e.jsx("div",{children:"Chat"}),e.jsxs("div",{children:[e.jsx("span",{className:`pill ${S?"rc-pill-online":""}`,children:S?"online":l?"offline":"‚Ä¶"}),y&&e.jsx("span",{className:"pill rc-pill-admin",style:{marginLeft:6},children:"Admin"})]})]}),e.jsx("div",{ref:Y,className:"rc-list",children:l?M.length===0?e.jsx("div",{className:"rc-empty",children:"‚Ä¶"}):e.jsx("ul",{children:M.map(t=>e.jsxs("li",{children:[e.jsxs("span",{className:"rc-ts",children:["[",ce(t.ts),"]"]}),e.jsx("span",{className:V(t.author),children:t.author}),e.jsx("span",{children:": "}),e.jsx("span",{children:t.text}),y&&e.jsxs("span",{className:"rc-actions",children:[e.jsx("button",{className:"rc-ax",onClick:()=>F(t.id,t.text),children:"–†–µ–¥."}),e.jsx("button",{className:"rc-ax",onClick:()=>H(t.id),children:"–£–¥–∞–ª."})]})]},t.id))}):e.jsx("div",{className:"rc-empty",children:"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶"})}),e.jsxs("form",{className:"rc-form",onSubmit:t=>{t.preventDefault(),z()},children:[e.jsx("input",{className:"rc-input",placeholder:"–Ω–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ‚Ä¶",value:U,onChange:t=>W(t.target.value),maxLength:O,disabled:!l||!S||!u||k}),e.jsx("button",{type:"submit",className:"rc-btn",disabled:!l||!S||!u||k,children:"‚ñ∂"})]})]}),l&&k&&e.jsx("div",{className:"nick-back",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"nick-card",children:[e.jsx("div",{style:{fontWeight:700,fontSize:16},children:"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∏–∫"}),e.jsx("div",{className:"nick-warn",children:"–ù–∏–∫ –∑–∞–¥–∞—ë—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑. –°–º–µ–Ω–∏—Ç—å –µ–≥–æ –ø–æ—Ç–æ–º –Ω–µ–ª—å–∑—è."}),e.jsxs("div",{className:"nick-row",children:[e.jsx("input",{className:"nick-input",value:B,onChange:t=>h(t.target.value),maxLength:80,placeholder:"–í–∞—à –Ω–∏–∫‚Ä¶",autoFocus:!0}),e.jsx("button",{type:"button",className:"nick-btn",onClick:()=>h(w()),children:"üé≤"}),e.jsx("button",{type:"button",className:"nick-btn",onClick:P,children:"–û–∫"})]}),e.jsx("div",{children:Array.from({length:5}).map((t,s)=>e.jsx("span",{className:"nick-pill",onClick:()=>h(w()),children:"üé≤ –°–ª—É—á–∞–π–Ω—ã–π"},s))})]})})]})}const pe=[{icon:e.jsx(se,{className:"w-5 h-5"}),title:"–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å",text:"–í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–æ HTTPS. –ê–¥–º–∏–Ω ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–π —Å—Å—ã–ª–∫–µ."},{icon:e.jsx(re,{className:"w-5 h-5"}),title:"–ö–æ–º—å—é–Ω–∏—Ç–∏",text:"–û–±—â–∏–π —á–∞—Ç —Å —Ä–∞–Ω–¥–æ–º–Ω—ã–º–∏ –Ω–∏–∫–∞–º–∏ ‚Äî –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏."},{icon:e.jsx(ne,{className:"w-5 h-5"}),title:"–û–±–Ω–æ–≤–ª–µ–Ω–∏—è",text:"–õ–µ–Ω—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏–∑ Telegram (KV —Ö—Ä–∞–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100)."},{icon:e.jsx(J,{className:"w-5 h-5"}),title:"–ú–æ–¥–µ—Ä–∞—Ü–∏—è",text:"–ê–¥–º–∏–Ω –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è."}],xe=[{to:"/faq",label:"FAQ",icon:e.jsx(G,{className:"w-4 h-4"})},{to:"/rules",label:"–ü—Ä–∞–≤–∏–ª–∞",icon:e.jsx(ee,{className:"w-4 h-4"})},{to:"/news",label:"–ù–æ–≤–æ—Å—Ç–∏",icon:e.jsx(te,{className:"w-4 h-4"})}];function fe(){const c=a.useRef(null);return a.useEffect(()=>{document.title="–ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ ‚Äî –ü–∞–º—è—Ç–∫–∞ (SKY)"},[]),e.jsxs("main",{className:"min-h-screen bg-[#0a0b0d] text-white",children:[e.jsxs("section",{ref:c,className:"mx-auto max-w-6xl px-4 pt-10 pb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/60",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"beta"})]}),e.jsxs("h1",{className:"mt-3 text-3xl sm:text-4xl font-bold tracking-tight",children:["–ü–æ—Ä—Ç–∞–ª –ø—Ä–æ–µ–∫—Ç–∞ ",e.jsx("span",{className:"text-sky-400",children:"SKY"})]}),e.jsx("p",{className:"mt-2 text-white/70 max-w-2xl",children:"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ó–¥–µ—Å—å –±—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏, —á–∞—Ç –∏ –ø–æ–ª–µ–∑–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –¥–ª—è –∫–æ–º–∞–Ω–¥—ã."}),e.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:xe.map(r=>e.jsxs(Q,{to:r.to,className:"inline-flex items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-sm hover:bg-white/10 transition",children:[r.icon,r.label,e.jsx(Z,{className:"w-3.5 h-3.5 opacity-70"})]},r.to))})]}),e.jsx("section",{className:"mx-auto max-w-6xl px-4 pb-6",children:e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:pe.map((r,f)=>e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 backdrop-blur hover:border-white/20 transition",children:[e.jsx("div",{className:"mb-2 inline-flex rounded-lg bg-white/10 p-2",children:r.icon}),e.jsx("div",{className:"font-semibold",children:r.title}),e.jsx("div",{className:"mt-1 text-sm text-white/70",children:r.text})]},f))})}),e.jsx("section",{className:"mx-auto max-w-6xl px-4 pb-10",children:e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5 text-sky-300"}),e.jsx("h2",{className:"text-lg font-semibold",children:"–ö–æ–º–∞–Ω–¥–Ω—ã–π —á–∞—Ç"})]}),e.jsx(de,{room:"global",className:"bg-transparent border-0 p-0"})]})})]})}export{fe as default};
