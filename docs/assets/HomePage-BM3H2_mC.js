import{j as e}from"./index-6v99bdfT.js";import{R as n,L as X}from"./react-vendor-DTkXckhQ.js";import{t as Z,s as G,M as J,c as ee,V as te,W as se,Y as re,U as ae,Z as ne}from"./icons-DpAAz4P9.js";const R=800,D=["–°–∫–∞–π-–°—Ç—Ä–∞–∂","–ü—Ä–∞–≤–æ-–°–∞–º—É—Ä–∞–π","–ü—É–ª—å—Å-–†–µ–π–¥–µ—Ä","–ö–∏–±–µ—Ä-–ú–µ–¥–∏–∫","–ù–µ–æ–Ω-–¢–∞–∫—Ç–∏–∫","–ê—Å—Ç—Ä–∞–ª-–û—Ñ–∏—Ü–µ—Ä","–§–∞–Ω—Ç–æ–º-–õ–µ—á–∞—â–∏–π","–®–∏—Ñ—Ä-–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä","–ö–≤–∞–Ω—Ç-–ë–æ–µ—Ü","–ü–∏–∫—Å–µ–ª—å-–í–æ–ª–∫","–¢—É–º–∞–Ω-–ö–æ–º–∞–Ω–¥–æ—Ä","–ò—Å–∫—Ä–∞-–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å","–ù—É–ª—å-–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è","–ü–æ–ª—è—Ä–Ω—ã–π –ü–∏–ª–æ—Ç","–ì–æ—Ä–æ–¥—Å–∫–æ–π –•–∏—Ä—É—Ä–≥","–°—ã–≤–æ—Ä–æ—Ç–∫–∞-Vibe","–°—Ç–µ—Ä–∏–ª—å–Ω—ã–π –ù–∏–Ω–¥–∑—è","–°–∫–∞–ª—å–ø–µ–ª—å-–û–±–ª–∞–∫–æ","–†–µ–Ω—Ç–≥–µ–Ω-–ü–∞–Ω–∫","–í–∞—Ç–∫–∞-Supreme"];function S(){const c=D[Math.floor(Math.random()*D.length)],s=Math.floor(Math.random()*900+100);return`${c} #${s}`}function ce(c){try{return typeof c=="string"?JSON.parse(c):c instanceof ArrayBuffer?JSON.parse(new TextDecoder().decode(c)):(typeof Blob<"u"&&c instanceof Blob,null)}catch{return null}}function ie(c){return new Date(c).toLocaleTimeString(void 0,{hour12:!1})}const oe=`
.rc-wrap{border:1px solid #111;background:#111;border-radius:4px;overflow:hidden;font:13px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Helvetica Neue',Arial}
.rc-head{padding:6px 8px;color:#c9d1d9;background:#0e0e0f;border-bottom:1px solid #0b0b0b;display:flex;justify-content:space-between;align-items:center}
.rc-head .pill{display:inline-flex;align-items:center;gap:6px;border-radius:10px;padding:2px 8px;font-size:12px}
.rc-pill-online{background:#193a2b;color:#7ee787;border:1px solid #2ea04344}
.rc-pill-admin{background:#1a2438;color:#79c0ff;border:1px solid #79c0ff33}
.rc-list{height:280px;overflow:auto;background:#1a1a1b}
.rc-list ul{list-style:none;margin:0;padding:0}
.rc-list li{padding:3px 8px;white-space:pre-wrap;word-break:break-word}
.rc-list li:nth-child(odd){background:#232324}
.rc-list li:nth-child(even){background:#1e1e1f}
.rc-ts{color:#9da1a6;margin-right:6px}
.rc-me{color:#a3d977;font-weight:600}
.rc-other{color:#e06c75;font-weight:600}
.rc-admin{color:#facc15;font-weight:700}
.rc-form{display:flex;gap:6px;padding:6px;background:#0f0f10;border-top:1px solid #0b0b0b}
.rc-input{flex:1;background:#0f0f10;border:1px solid #2a2a2b;color:#e5e7eb;border-radius:4px;padding:6px 8px}
.rc-btn{background:#2b2b2c;border:1px solid #3a3a3c;color:#e5e7eb;border-radius:4px;padding:6px 10px;cursor:pointer}
.rc-btn:disabled{opacity:.6;cursor:not-allowed}
.rc-actions{display:flex;gap:4px;margin-left:8px}
.rc-ax{font-size:12px;background:#2b2b2c;border:1px solid #3a3a3c;color:#ccc;border-radius:4px;padding:2px 6px;cursor:pointer}
.rc-empty{opacity:.7;padding:6px 8px}
.nick-back{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:1000}
.nick-card{width:min(92vw,520px);background:#121316;border:1px solid #2a2a2b;border-radius:10px;padding:14px;color:#e5e7eb}
.nick-row{display:flex;gap:8px;margin-top:10px}
.nick-input{flex:1;background:#0f0f10;border:1px solid #2a2a2b;color:#e5e7eb;border-radius:6px;padding:8px}
.nick-btn{background:#243040;border:1px solid #375a7a;color:#d6e8ff;border-radius:6px;padding:8px 12px;cursor:pointer}
.nick-pill{display:inline-block;margin-top:8px;margin-right:6px;background:#222427;border:1px solid #303236;border-radius:999px;padding:4px 10px;cursor:pointer}
.nick-warn{font-size:12px;color:#b3b7bf;opacity:.9;margin-top:6px}
`;function le(c){try{const s=new URL(c);return s.protocol=s.protocol==="wss:"?"https:":s.protocol==="ws:"?"http:":s.protocol,s.pathname="/",s.search="",s.hash="",s.toString().replace(/\/+$/,"")}catch{return""}}function m(c){const s=`@e${c}`;return{NAME_KEY:`chat:nick${s}`,NAME_LOCK:`chat:nick:lock${s}`}}function de({room:c="global",className:s}){const u="wss://notifications-worker.wizardiowhy.workers.dev/chat",v=n.useMemo(()=>le(u),[u]),[N,E]=n.useState(1),[h,A]=n.useState(!1),k=n.useMemo(()=>m(N),[N]),[y,O]=n.useState(!1),[w,T]=n.useState(!1),[Y,$]=n.useState(""),[C,f]=n.useState([]),b=n.useRef(null),U=n.useRef(null),j=n.useRef({}),[p,W]=n.useState(()=>{try{return localStorage.getItem(m(1).NAME_KEY)||localStorage.getItem(m(N).NAME_KEY)||null}catch{return null}}),[g,P]=n.useState(()=>{try{const t=localStorage.getItem(m(1).NAME_KEY)||localStorage.getItem(m(N).NAME_KEY),r=localStorage.getItem(m(1).NAME_LOCK)==="1"||localStorage.getItem(m(N).NAME_LOCK)==="1";return!(t&&r)}catch{return!0}}),[B,M]=n.useState(()=>p??S());n.useEffect(()=>{let t=!1;if(!v){E(1),A(!0);return}return(async()=>{try{const r=await fetch(`${v}/nick-epoch`,{credentials:"include"}),i=r.ok&&Number((await r.json().catch(()=>({}))).epoch)||1;t||(E(i),A(!0))}catch{t||(E(1),A(!0))}})(),()=>{t=!0}},[v]),n.useEffect(()=>{const t=U.current;t&&(t.scrollTop=t.scrollHeight)},[C.length]),n.useEffect(()=>{let t=!1,r=0;const i=()=>{if(t)return;const l=new URL(u);l.searchParams.set("room",c);const o=new WebSocket(l);b.current=o,o.addEventListener("open",()=>{O(!0),r=0,p&&!g&&o.send(JSON.stringify({type:"hello",name:p}))}),o.addEventListener("message",async _=>{try{let a=ce(_.data);if(!a&&typeof Blob<"u"&&_.data instanceof Blob&&(a=JSON.parse(await _.data.text())),!a)return;if(a.type==="history")f(a.messages);else if(a.type==="message"){const x=a.cid;if(x&&j.current[x]){const d=j.current[x];delete j.current[x],f(L=>{const K=L.filter(I=>I.id!==d);return K.some(I=>I.id===a.message.id)?K:[...K,a.message]})}else f(d=>d.some(L=>L.id===a.message.id)?d:[...d,a.message])}else if(a.type==="delete")f(x=>x.filter(d=>d.id!==a.id));else if(a.type==="edit")f(x=>x.map(d=>d.id===a.id?{...d,text:a.text}:d));else if(a.type==="system"&&(a.text==="admin-ok"&&T(!0),a.text==="hello-ok"&&T(!1),a.name)){W(a.name);try{localStorage.setItem(k.NAME_KEY,a.name),localStorage.setItem(k.NAME_LOCK,"1")}catch{}P(!1)}}catch{}});const Q=()=>{O(!1),!t&&(r=Math.min(r+1,6),setTimeout(i,400*r))};o.addEventListener("close",Q),o.addEventListener("error",()=>o.close())};return i(),()=>{var l;t=!0;try{(l=b.current)==null||l.close()}catch{}}},[u,c,p,g,k.NAME_KEY,k.NAME_LOCK]);function z(){const r=((B||"").trim().slice(0,80)||S()).replace(/[^\p{L}\p{N}_# -]+/gu,"");W(r);try{localStorage.setItem(k.NAME_KEY,r)}catch{}const i=b.current;i&&i.readyState===WebSocket.OPEN&&i.send(JSON.stringify({type:"hello",name:r}))}function H(){const t=Y.replace(/\s+/g," ").trim(),r=b.current;if(!p||g||!t||!r||r.readyState!==WebSocket.OPEN)return;const i=`${Date.now()}_${Math.random().toString(36).slice(2)}`,l=`loc_${i}`;j.current[i]=l,f(o=>[...o,{id:l,author:w?"Admin":p,text:t,ts:Date.now()}]),r.send(JSON.stringify({type:"message",text:t.slice(0,R),cid:i})),$("")}const V=t=>{const r=b.current;!w||!r||r.readyState!==WebSocket.OPEN||r.send(JSON.stringify({type:"delete",id:t}))},q=(t,r)=>{var o;const i=b.current;if(!w||!i||i.readyState!==WebSocket.OPEN)return;const l=(o=prompt("–ò–∑–º–µ–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:",r))==null?void 0:o.trim();l&&i.send(JSON.stringify({type:"edit",id:t,text:l.slice(0,R)}))},F=t=>t==="Admin"?"rc-admin":t===p?"rc-me":"rc-other";return e.jsxs("div",{className:s??"",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:oe}}),e.jsxs("div",{className:"rc-wrap","aria-busy":!h,children:[e.jsxs("div",{className:"rc-head",children:[e.jsx("div",{children:"Chat"}),e.jsxs("div",{children:[e.jsx("span",{className:`pill ${y?"rc-pill-online":""}`,children:y?"online":h?"offline":"‚Ä¶"}),w&&e.jsx("span",{className:"pill rc-pill-admin",style:{marginLeft:6},children:"Admin"})]})]}),e.jsx("div",{ref:U,className:"rc-list",children:h?C.length===0?e.jsx("div",{className:"rc-empty",children:"‚Ä¶"}):e.jsx("ul",{children:C.map(t=>e.jsxs("li",{children:[e.jsxs("span",{className:"rc-ts",children:["[",ie(t.ts),"]"]}),e.jsx("span",{className:F(t.author),children:t.author}),e.jsx("span",{children:": "}),e.jsx("span",{children:t.text}),w&&e.jsxs("span",{className:"rc-actions",children:[e.jsx("button",{className:"rc-ax",onClick:()=>q(t.id,t.text),children:"–†–µ–¥."}),e.jsx("button",{className:"rc-ax",onClick:()=>V(t.id),children:"–£–¥–∞–ª."})]})]},t.id))}):e.jsx("div",{className:"rc-empty",children:"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶"})}),e.jsxs("form",{className:"rc-form",onSubmit:t=>{t.preventDefault(),H()},children:[e.jsx("input",{className:"rc-input",placeholder:"–Ω–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ‚Ä¶",value:Y,onChange:t=>$(t.target.value),maxLength:R,disabled:!h||!y||!p||g}),e.jsx("button",{type:"submit",className:"rc-btn",disabled:!h||!y||!p||g,children:"‚ñ∂"})]})]}),h&&g&&e.jsx("div",{className:"nick-back",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"nick-card",children:[e.jsx("div",{style:{fontWeight:700,fontSize:16},children:"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∏–∫"}),e.jsx("div",{className:"nick-warn",children:"–ù–∏–∫ –∑–∞–¥–∞—ë—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑. –°–º–µ–Ω–∏—Ç—å –µ–≥–æ –ø–æ—Ç–æ–º –Ω–µ–ª—å–∑—è."}),e.jsxs("div",{className:"nick-row",children:[e.jsx("input",{className:"nick-input",value:B,onChange:t=>M(t.target.value),maxLength:80,placeholder:"–í–∞—à –Ω–∏–∫‚Ä¶"}),e.jsx("button",{type:"button",className:"nick-btn",onClick:()=>M(S()),children:"üé≤"}),e.jsx("button",{type:"button",className:"nick-btn",onClick:z,children:"–û–∫"})]}),e.jsx("div",{children:Array.from({length:5}).map((t,r)=>e.jsx("span",{className:"nick-pill",onClick:()=>M(S()),children:"üé≤ –°–ª—É—á–∞–π–Ω—ã–π"},r))})]})})]})}const pe=[{icon:e.jsx(re,{className:"w-5 h-5"}),title:"–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å",text:"–í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–æ HTTPS. –ê–¥–º–∏–Ω ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–π —Å—Å—ã–ª–∫–µ."},{icon:e.jsx(ae,{className:"w-5 h-5"}),title:"–ö–æ–º—å—é–Ω–∏—Ç–∏",text:"–û–±—â–∏–π —á–∞—Ç —Å —Ä–∞–Ω–¥–æ–º–Ω—ã–º–∏ –Ω–∏–∫–∞–º–∏ ‚Äî –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏."},{icon:e.jsx(ne,{className:"w-5 h-5"}),title:"–û–±–Ω–æ–≤–ª–µ–Ω–∏—è",text:"–õ–µ–Ω—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏–∑ Telegram (KV —Ö—Ä–∞–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100)."},{icon:e.jsx(J,{className:"w-5 h-5"}),title:"–ú–æ–¥–µ—Ä–∞—Ü–∏—è",text:"–ê–¥–º–∏–Ω –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è."}],xe=[{to:"/faq",label:"FAQ",icon:e.jsx(ee,{className:"w-4 h-4"})},{to:"/rules",label:"–ü—Ä–∞–≤–∏–ª–∞",icon:e.jsx(te,{className:"w-4 h-4"})},{to:"/news",label:"–ù–æ–≤–æ—Å—Ç–∏",icon:e.jsx(se,{className:"w-4 h-4"})}];function fe(){const c=n.useRef(null);return n.useEffect(()=>{document.title="–ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ ‚Äî –ü–∞–º—è—Ç–∫–∞ (SKY)"},[]),e.jsxs("main",{className:"min-h-screen bg-[#0a0b0d] text-white",children:[e.jsxs("section",{ref:c,className:"mx-auto max-w-6xl px-4 pt-10 pb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/60",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:"beta"})]}),e.jsxs("h1",{className:"mt-3 text-3xl sm:text-4xl font-bold tracking-tight",children:["–ü–æ—Ä—Ç–∞–ª –ø—Ä–æ–µ–∫—Ç–∞ ",e.jsx("span",{className:"text-sky-400",children:"SKY"})]}),e.jsx("p",{className:"mt-2 text-white/70 max-w-2xl",children:"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ó–¥–µ—Å—å –±—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏, —á–∞—Ç –∏ –ø–æ–ª–µ–∑–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –¥–ª—è –∫–æ–º–∞–Ω–¥—ã."}),e.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:xe.map(s=>e.jsxs(X,{to:s.to,className:"inline-flex items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-sm hover:bg-white/10 transition",children:[s.icon,s.label,e.jsx(G,{className:"w-3.5 h-3.5 opacity-70"})]},s.to))})]}),e.jsx("section",{className:"mx-auto max-w-6xl px-4 pb-6",children:e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:pe.map((s,u)=>e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 backdrop-blur hover:border-white/20 transition",children:[e.jsx("div",{className:"mb-2 inline-flex rounded-lg bg-white/10 p-2",children:s.icon}),e.jsx("div",{className:"font-semibold",children:s.title}),e.jsx("div",{className:"mt-1 text-sm text-white/70",children:s.text})]},u))})}),e.jsx("section",{className:"mx-auto max-w-6xl px-4 pb-10",children:e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5 text-sky-300"}),e.jsx("h2",{className:"text-lg font-semibold",children:"–ö–æ–º–∞–Ω–¥–Ω—ã–π —á–∞—Ç"})]}),e.jsx(de,{room:"global",className:"bg-transparent border-0 p-0"})]})})]})}export{fe as default};
