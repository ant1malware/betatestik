import{j as e}from"./index-CpgF2xBS.js";import{R as i,L as Y}from"./react-vendor-DTkXckhQ.js";import{t as V,s as q,M as K,c as F,V as Q,W as X,Y as Z,U as G,Z as ee}from"./icons-DpAAz4P9.js";const L=800,k="chat:nick",D="chat:nick:lock",J=["–°–∫–∞–π-–°—Ç—Ä–∞–∂","–ü—Ä–∞–≤–æ-–°–∞–º—É—Ä–∞–π","–ü—É–ª—å—Å-–†–µ–π–¥–µ—Ä","–ö–∏–±–µ—Ä-–ú–µ–¥–∏–∫","–ù–µ–æ–Ω-–¢–∞–∫—Ç–∏–∫","–ê—Å—Ç—Ä–∞–ª-–û—Ñ–∏—Ü–µ—Ä","–§–∞–Ω—Ç–æ–º-–õ–µ—á–∞—â–∏–π","–®–∏—Ñ—Ä-–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä","–ö–≤–∞–Ω—Ç-–ë–æ–µ—Ü","–ü–∏–∫—Å–µ–ª—å-–í–æ–ª–∫","–¢—É–º–∞–Ω-–ö–æ–º–∞–Ω–¥–æ—Ä","–ò—Å–∫—Ä–∞-–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å","–ù—É–ª—å-–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è","–ü–æ–ª—è—Ä–Ω—ã–π –ü–∏–ª–æ—Ç","–ì–æ—Ä–æ–¥—Å–∫–æ–π –•–∏—Ä—É—Ä–≥","–°—ã–≤–æ—Ä–æ—Ç–∫–∞-Vibe","–°—Ç–µ—Ä–∏–ª—å–Ω—ã–π –ù–∏–Ω–¥–∑—è","–°–∫–∞–ª—å–ø–µ–ª—å-–û–±–ª–∞–∫–æ","–†–µ–Ω—Ç–≥–µ–Ω-–ü–∞–Ω–∫","–í–∞—Ç–∫–∞-Supreme"];function w(){const n=J[Math.floor(Math.random()*J.length)],c=Math.floor(Math.random()*900+100);return`${n} #${c}`}function te(n){try{return typeof n=="string"?JSON.parse(n):n instanceof ArrayBuffer?JSON.parse(new TextDecoder().decode(n)):(typeof Blob<"u"&&n instanceof Blob,null)}catch{return null}}function se(n){return new Date(n).toLocaleTimeString(void 0,{hour12:!1})}const re=`
.rc-wrap{border:1px solid #111;background:#111;border-radius:4px;overflow:hidden;font:13px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Helvetica Neue',Arial}
.rc-head{padding:6px 8px;color:#c9d1d9;background:#0e0e0f;border-bottom:1px solid #0b0b0b;display:flex;justify-content:space-between;align-items:center}
.rc-head .pill{display:inline-flex;align-items:center;gap:6px;border-radius:10px;padding:2px 8px;font-size:12px}
.rc-pill-online{background:#193a2b;color:#7ee787;border:1px solid #2ea04344}
.rc-pill-admin{background:#1a2438;color:#79c0ff;border:1px solid #79c0ff33}
.rc-list{height:280px;overflow:auto;background:#1a1a1b}
.rc-list ul{list-style:none;margin:0;padding:0}
.rc-list li{padding:3px 8px;white-space:pre-wrap;word-break:break-word}
.rc-list li:nth-child(odd){background:#232324}
.rc-list li:nth-child(even){background:#1e1e1f}
.rc-ts{color:#9da1a6;margin-right:6px}
.rc-me{color:#a3d977;font-weight:600}
.rc-other{color:#e06c75;font-weight:600}
.rc-admin{color:#facc15;font-weight:700}
.rc-form{display:flex;gap:6px;padding:6px;background:#0f0f10;border-top:1px solid #0b0b0b}
.rc-input{flex:1;background:#0f0f10;border:1px solid #2a2a2b;color:#e5e7eb;border-radius:4px;padding:6px 8px}
.rc-btn{background:#2b2b2c;border:1px solid #3a3a3c;color:#e5e7eb;border-radius:4px;padding:6px 10px;cursor:pointer}
.rc-btn:disabled{opacity:.6;cursor:not-allowed}
.rc-actions{display:flex;gap:4px;margin-left:8px}
.rc-ax{font-size:12px;background:#2b2b2c;border:1px solid #3a3a3c;color:#ccc;border-radius:4px;padding:2px 6px;cursor:pointer}
.rc-empty{opacity:.7;padding:6px 8px}
/* –Ω–∏–∫-–¥–∏–∞–ª–æ–≥ */
.nick-back{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:1000}
.nick-card{width:min(92vw,520px);background:#121316;border:1px solid #2a2a2b;border-radius:10px;padding:14px;color:#e5e7eb}
.nick-row{display:flex;gap:8px;margin-top:10px}
.nick-input{flex:1;background:#0f0f10;border:1px solid #2a2a2b;color:#e5e7eb;border-radius:6px;padding:8px}
.nick-btn{background:#243040;border:1px solid #375a7a;color:#d6e8ff;border-radius:6px;padding:8px 12px;cursor:pointer}
.nick-pill{display:inline-block;margin-top:8px;margin-right:6px;background:#222427;border:1px solid #303236;border-radius:999px;padding:4px 10px;cursor:pointer}
.nick-warn{font-size:12px;color:#b3b7bf;opacity:.9;margin-top:6px}
`;function ne({room:n="global",className:c}){const b="wss://notifications-worker.wizardiowhy.workers.dev/chat",[g,A]=i.useState(!1),[f,I]=i.useState(!1),[R,M]=i.useState(""),[j,m]=i.useState([]),u=i.useRef(null),O=i.useRef(null),N=i.useRef({}),[p,T]=i.useState(()=>{try{return localStorage.getItem(k)}catch{return null}}),[h,U]=i.useState(()=>{try{const t=localStorage.getItem(k),s=localStorage.getItem(D)==="1";return!(t&&s)}catch{return!0}}),[_,y]=i.useState(()=>p??w());i.useEffect(()=>{const t=O.current;t&&(t.scrollTop=t.scrollHeight)},[j.length]),i.useEffect(()=>{let t=!1,s=0;const a=()=>{if(t)return;const o=new URL(b);o.searchParams.set("room",n);const l=new WebSocket(o);u.current=l,l.addEventListener("open",()=>{A(!0),s=0,p&&!h&&l.send(JSON.stringify({type:"hello",name:p}))}),l.addEventListener("message",async S=>{try{let r=te(S.data);if(!r&&typeof Blob<"u"&&S.data instanceof Blob&&(r=JSON.parse(await S.data.text())),!r)return;if(r.type==="history")m(r.messages);else if(r.type==="message"){const x=r.cid;if(x&&N.current[x]){const d=N.current[x];delete N.current[x],m(v=>{const C=v.filter(E=>E.id!==d);return C.some(E=>E.id===r.message.id)?C:[...C,r.message]})}else m(d=>d.some(v=>v.id===r.message.id)?d:[...d,r.message])}else if(r.type==="delete")m(x=>x.filter(d=>d.id!==r.id));else if(r.type==="edit")m(x=>x.map(d=>d.id===r.id?{...d,text:r.text}:d));else if(r.type==="system"&&(r.text==="admin-ok"&&I(!0),r.text==="hello-ok"&&I(!1),r.name)){T(r.name);try{localStorage.setItem(k,r.name),localStorage.setItem(D,"1")}catch{}U(!1)}}catch{}});const $=()=>{A(!1),!t&&(s=Math.min(s+1,6),setTimeout(a,400*s))};l.addEventListener("close",$),l.addEventListener("error",()=>l.close())};return a(),()=>{var o;t=!0;try{(o=u.current)==null||o.close()}catch{}}},[b,n,p,h]);function W(){const s=((_||"").trim().slice(0,80)||w()).replace(/[^\p{L}\p{N}_# -]+/gu,"");T(s);try{localStorage.setItem(k,s)}catch{}const a=u.current;a&&a.readyState===WebSocket.OPEN&&a.send(JSON.stringify({type:"hello",name:s}))}function P(){const t=R.replace(/\s+/g," ").trim(),s=u.current;if(!p||h||!t||!s||s.readyState!==WebSocket.OPEN)return;const a=`${Date.now()}_${Math.random().toString(36).slice(2)}`,o=`loc_${a}`;N.current[a]=o,m(l=>[...l,{id:o,author:f?"Admin":p,text:t,ts:Date.now()}]),s.send(JSON.stringify({type:"message",text:t.slice(0,L),cid:a})),M("")}const z=t=>{const s=u.current;!f||!s||s.readyState!==WebSocket.OPEN||s.send(JSON.stringify({type:"delete",id:t}))},B=(t,s)=>{var l;const a=u.current;if(!f||!a||a.readyState!==WebSocket.OPEN)return;const o=(l=prompt("–ò–∑–º–µ–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:",s))==null?void 0:l.trim();o&&a.send(JSON.stringify({type:"edit",id:t,text:o.slice(0,L)}))},H=t=>t==="Admin"?"rc-admin":t===p?"rc-me":"rc-other";return e.jsxs("div",{className:c??"",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:re}}),e.jsxs("div",{className:"rc-wrap",children:[e.jsxs("div",{className:"rc-head",children:[e.jsx("div",{children:"Chat"}),e.jsxs("div",{children:[e.jsx("span",{className:`pill ${g?"rc-pill-online":""}`,children:g?"online":"offline"}),f&&e.jsx("span",{className:"pill rc-pill-admin",style:{marginLeft:6},children:"Admin"})]})]}),e.jsx("div",{ref:O,className:"rc-list",children:j.length===0?e.jsx("div",{className:"rc-empty",children:"‚Ä¶"}):e.jsx("ul",{children:j.map(t=>e.jsxs("li",{children:[e.jsxs("span",{className:"rc-ts",children:["[",se(t.ts),"]"]}),e.jsx("span",{className:H(t.author),children:t.author}),e.jsx("span",{children:": "}),e.jsx("span",{children:t.text}),f&&e.jsxs("span",{className:"rc-actions",children:[e.jsx("button",{className:"rc-ax",onClick:()=>B(t.id,t.text),children:"–†–µ–¥."}),e.jsx("button",{className:"rc-ax",onClick:()=>z(t.id),children:"–£–¥–∞–ª."})]})]},t.id))})}),e.jsxs("form",{className:"rc-form",onSubmit:t=>{t.preventDefault(),P()},children:[e.jsx("input",{className:"rc-input",placeholder:"–Ω–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ‚Ä¶",value:R,onChange:t=>M(t.target.value),maxLength:L,disabled:!g||!p||h}),e.jsx("button",{type:"submit",className:"rc-btn",disabled:!g||!p||h,children:"‚ñ∂"})]})]}),h&&e.jsx("div",{className:"nick-back",children:e.jsxs("div",{className:"nick-card",children:[e.jsx("div",{style:{fontWeight:700,fontSize:16},children:"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∏–∫"}),e.jsx("div",{className:"nick-warn",children:"–ù–∏–∫ –∑–∞–¥–∞—ë—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑. –°–º–µ–Ω–∏—Ç—å –µ–≥–æ –ø–æ—Ç–æ–º –Ω–µ–ª—å–∑—è."}),e.jsxs("div",{className:"nick-row",children:[e.jsx("input",{className:"nick-input",value:_,onChange:t=>y(t.target.value),maxLength:80,placeholder:"–í–∞—à –Ω–∏–∫‚Ä¶"}),e.jsx("button",{type:"button",className:"nick-btn",onClick:()=>y(w()),children:"üé≤"}),e.jsx("button",{type:"button",className:"nick-btn",onClick:()=>{W()},children:"–û–∫"})]}),e.jsx("div",{children:Array.from({length:5}).map((t,s)=>e.jsx("span",{className:"nick-pill",onClick:()=>y(w()),children:"üé≤ –°–ª—É—á–∞–π–Ω—ã–π"},s))})]})})]})}const ae=[{icon:e.jsx(Z,{className:"w-5 h-5"}),title:"–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å",text:"–í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–æ HTTPS. –ê–¥–º–∏–Ω ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–π —Å—Å—ã–ª–∫–µ."},{icon:e.jsx(G,{className:"w-5 h-5"}),title:"–ö–æ–º—å—é–Ω–∏—Ç–∏",text:"–û–±—â–∏–π —á–∞—Ç —Å —Ä–∞–Ω–¥–æ–º–Ω—ã–º–∏ –Ω–∏–∫–∞–º–∏ ‚Äî –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏."},{icon:e.jsx(ee,{className:"w-5 h-5"}),title:"–û–±–Ω–æ–≤–ª–µ–Ω–∏—è",text:"–õ–µ–Ω—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏–∑ Telegram (KV —Ö—Ä–∞–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100)."},{icon:e.jsx(K,{className:"w-5 h-5"}),title:"–ú–æ–¥–µ—Ä–∞—Ü–∏—è",text:"–ê–¥–º–∏–Ω –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è."}],ie=[{to:"/faq",label:"FAQ",icon:e.jsx(F,{className:"w-4 h-4"})},{to:"/rules",label:"–ü—Ä–∞–≤–∏–ª–∞",icon:e.jsx(Q,{className:"w-4 h-4"})},{to:"/news",label:"–ù–æ–≤–æ—Å—Ç–∏",icon:e.jsx(X,{className:"w-4 h-4"})}];function de(){const n=i.useRef(null);return i.useEffect(()=>{document.title="–ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ ‚Äî –ü–∞–º—è—Ç–∫–∞ (SKY)"},[]),e.jsxs("main",{className:"min-h-screen bg-[#0a0b0d] text-white",children:[e.jsxs("section",{ref:n,className:"mx-auto max-w-6xl px-4 pt-10 pb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/60",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{children:"beta"})]}),e.jsxs("h1",{className:"mt-3 text-3xl sm:text-4xl font-bold tracking-tight",children:["–ü–æ—Ä—Ç–∞–ª –ø—Ä–æ–µ–∫—Ç–∞ ",e.jsx("span",{className:"text-sky-400",children:"SKY"})]}),e.jsx("p",{className:"mt-2 text-white/70 max-w-2xl",children:"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ó–¥–µ—Å—å –±—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏, —á–∞—Ç –∏ –ø–æ–ª–µ–∑–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –¥–ª—è –∫–æ–º–∞–Ω–¥—ã."}),e.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:ie.map(c=>e.jsxs(Y,{to:c.to,className:"inline-flex items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-sm hover:bg-white/10 transition",children:[c.icon,c.label,e.jsx(q,{className:"w-3.5 h-3.5 opacity-70"})]},c.to))})]}),e.jsx("section",{className:"mx-auto max-w-6xl px-4 pb-6",children:e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:ae.map((c,b)=>e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 backdrop-blur hover:border-white/20 transition",children:[e.jsx("div",{className:"mb-2 inline-flex rounded-lg bg-white/10 p-2",children:c.icon}),e.jsx("div",{className:"font-semibold",children:c.title}),e.jsx("div",{className:"mt-1 text-sm text-white/70",children:c.text})]},b))})}),e.jsx("section",{className:"mx-auto max-w-6xl px-4 pb-10",children:e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-sky-300"}),e.jsx("h2",{className:"text-lg font-semibold",children:"–ö–æ–º–∞–Ω–¥–Ω—ã–π —á–∞—Ç"})]}),e.jsx(ne,{room:"global",className:"bg-transparent border-0 p-0"})]})})]})}export{de as default};
